ext {
    /**
     * Gets version code, based on tags count from git
     */
    getGitVersionCode = { ->
        try {
            def code = new ByteArrayOutputStream()
            exec {
                commandLine 'git', 'tag', '--list'
                standardOutput = code
            }
            return code.toString().split("\n").size()
        } catch (ignored) {
            return -1
        }
    }

    /**
     * Gets the version name from the latest Git tag
     */
    getGitVersionName = { ->
        try {
            def stdout = new ByteArrayOutputStream()
            exec {
                commandLine 'git', 'describe', '--tags', '--abbr=0'
                standardOutput = stdout
            }
            return stdout.toString().replaceAll("^v", "").trim()
        } catch (ignored) {
            return "undefined"
        }
    }
}
